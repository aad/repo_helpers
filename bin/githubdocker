#!/usr/bin/env bash
set -ef -o pipefail

if [[ "$1" = "create" ]]; then
  shift
  REPO_NAME="$1";shift
  [[ -z "$REPO_NAME" ]] && { echo "repository name must be specified." >&2; exit 1; }

  githubapi createclone $REPO_NAME
  dockerhubapi create $REPO_NAME nasoym/$REPO_NAME
  githubapi add_docker_service $REPO_NAME

  touch $REPO_NAME/Dockerfile

fi
